<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Labs environment for data science with Jupyter, R, and Scala.">
  <title>Skills Network Labs</title>

  
  <script>
    !function () { 'use strict'; var e = ['debug', 'destroy', 'do', 'help', 'identify', 'is', 'off', 'on', 'ready', 'render', 'reset', 'safe', 'set'], t = window.noticeable = window.noticeable || []; function n(e) { return function () { var n = Array.prototype.slice.call(arguments); return n.unshift(e), t.push(n), t } } t.version = '2.0.0', function () { for (var r = 0; r < e.length; r++) { var i = e[r]; t[i] = n(i) } }(), function () { var e = document.createElement('script'); e.async = !0, e.src = 'https://sdk.noticeable.io/l.js'; var t = document.head; t.insertBefore(e, t.firstChild) }() }();
    const widgetId = '3yBUkJ9aprTWOFvB5l1l';
    window.noticeable.on(
      'widget:trigger_view:clicked', widgetId, () => {
        window.noticeable.do('widget:open', widgetId);
      });
    window.noticeable.render("widget", widgetId);
  </script>

  <script>
    var DEFAULT_HEARTBEAT_TIME = 1800;
    console.log("Persisting DEFAULT_HEARTBEAT_TIME as " + DEFAULT_HEARTBEAT_TIME);
    var INACTIVE_LOGOUT_TIME = 30;
  </script>

    
    <!-- start Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-1433936-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-1433936-16', {
        'cookie_flags': 'SameSite=Strict;Secure'
      });
    </script>
    <!-- end Google Analytics -->
  

  
    <meta name="google-site-verification" content="" />
  

  
    <script src="https://cdn.ravenjs.com/3.6.1/raven.min.js" integrity="sha384-rKlahPWcPWms7ChtWI3cD1GNFfV0mrMOXc2ZE9FO52lTge4iQDVvcatyJISSLkkX" crossorigin="anonymous" referrerpolicy="no-referrer" defer></script>
    <script defer>
      // Once everything including subframes and stylesheets is loaded
      window.addEventListener('load', function(){
        function configureRaven() {
          Raven.config('https://b052ab88487148ac9ff6eed308fd111b@sentry.skills.network/4', {
            logger: 'monocle-frontend'
          }).install();
        }

        if (Raven) {
          configureRaven();
        } else {
          setTimeout(function(){ configureRaven(); }, 500);
        }
      });
    </script>
  

  <link rel="stylesheet" type="text/css" href="/static/css/tailwind.css" />
  <link rel="stylesheet" type="text/css" href="/static/css/custom_tailwind.css" />

  <script src="https://cdnjs.cloudflare.com/ajax/libs/split.js/1.6.0/split.min.js"
    integrity="sha512-K6jiHca9QX/njVi724ckz3QLLDlQ2BTBFxZGz5Bi336GZLGnbgay6erqWe0ADqRdkYS8LNOZvfOarD7UxQ8orA=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"
    integrity="sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK" crossorigin="anonymous"
    referrerpolicy="no-referrer"></script>
  <script src="https://cdn.jsdelivr.net/npm/bowser@2.5.2/es5.min.js"
    integrity="sha384-meiaV8DP8WNz9bvwGCLNXn7cvfBhAbrcy7seP0AxFqFQBqwQsdFhMSnDDw3HnLnl" crossorigin="anonymous"
    referrerpolicy="no-referrer"></script>
  <script src="/static/browser-support-check.js" defer></script>
  <style>
    body {
      overflow: hidden !important;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif;

      /* general vars */
      --tooltip-bg: #111111;
      --tooltip-text: #d0d0d0;

      /* left side nav */
      --left-side-nav-width: 3rem;
      --left-side-nav-bg: #111111;
      --left-side-nav-icon: #d0d0d0;
      --left-side-nav-icon-hover: #f0f0f0;
      --left-side-nav-icon-bg: #202020;
      /* tai chat */
      --tai-chat-bg: #202020;
      --tai-textarea-bg: #2C2C2C;
      --tai-textarea-text: #e0e0e0;
      --tai-textarea-icon: #d0d0d0;

      /* header (topbar) */
      --topbar-height: 3.5rem;

      --header-bg: #111111;
      --header-text: #CCCCCC;
      --header-icon: #CCCCCC;
      --dropdown-bg: #1C1E1F;
      --dropdown-link-text: #CCCCCC;
      --dropdown-link-bg-hover: #393939;
      --dropdown-link-text-hover: #CCCCCC;
      --menu-button-no-dropdown-text: #B2C4D8;
      --dropdown-filter: drop-shadow(0px 5px 5px rgba(0, 0, 0, 0.5));
      --notification-text: #F4F4F4;
      --notification-bg: #262626;
      --notification-accent: #A600C1;
      --toggle-bg: #3C3C3C;
      --toggle-selector: #8D8D8D;
      --toggle-bg: #3C3C3C;
      --toggle-selector: #8D8D8D;
    }

    body.light {
      /* general vars */
      --tooltip-bg: #F5F5F5;
      --tooltip-text: #121619;

      /* left side nav */
      --left-side-nav-bg: #F5F5F5;
      --left-side-nav-icon: #3C3C3C;
      --left-side-nav-icon-hover: #0f0f0f;
      --left-side-nav-icon-bg: #e5e5e5;

      /* tai chat */
      --tai-chat-bg: #e5e5e5;
      --tai-textarea-bg: #D3D3D3;
      --tai-textarea-text: #121619;
      --tai-textarea-icon: #697077;

      /* header (topbar) */
      --header-bg: #F5F5F5;
      --header-text: #121619;
      --header-icon: #697077;
      --dropdown-bg: #FFFFFF;
      --dropdown-link-text: #697077;
      --dropdown-link-bg-hover: #F2F4F8;
      --dropdown-link-text-hover: #121619;
      --menu-button-no-dropdown-text: #1569CE;
      --dropdown-filter: drop-shadow(0px 5px 2px rgba(18, 22, 25, 0.03));
      --notification-text: #666666;
      --notification-bg: #FFFFFF;
      --notification-accent: #1B52DA;
      --toggle-bg: #DDE1E6;
      --toggle-selector: #A0A6AC;
      --toggle-bg: #DDE1E6;
      --toggle-selector: #A0A6AC;
    }

    div.page-container {
      width: 100vw;
      height: 100vh;
      position: fixed;
      top: 0;
      left: 0;
      display: flex;
      flex-direction: column;
    }

    div.content-wrapper {
      width: 100%;
      /* decrease height by topbar height */
      height: calc(100vh - var(--topbar-height));
      background: black;
      display: flex;
      flex-direction: row;
      flex-wrap: nowrap;
    }

    div.content-wrapper #left-side-nav {
      width: var(--left-side-nav-width);
      background-color: var(--left-side-nav-bg);
    }

    div.content-wrapper #main-container {
      height: 100%;
      width: calc(100% - var(--left-side-nav-width));
      display: flex;
      flex-direction: row;
      flex-wrap: nowrap;

    }

    div.content-wrapper #right-side-container {
      height: 100%;
    }

    div.content-wrapper #left-side-container {
      height: 100%;
    }

    #left-side-container #md-instructions {
      height: 100%;
      width: 100%;
      border: none;
    }


    .gutter {
      background: transparent;
      transition: 300ms ease-in-out;
      -webkit-transition: 300ms ease-in-out;
      transition-property: all;
      -webkit-transition-property: all;
    }

    .gutter:hover {
      background: #444444;
    }

    .gutter.gutter-horizontal {
      cursor: ew-resize;
    }

    .tooltip {
      background-color: var(--tooltip-bg);
      color: var(--tooltip-text);
    }
  </style>
</head>

<body>

  
  
  <!-- start UserVoice -->
  <script type='text/javascript' defer>
    // Once the document is loaded but not stylesheets or subdocuments
    window.addEventListener('DOMContentLoaded', function () {
      var api_key = 'O5SLs1K1RfWhBYkHvMaXTg'; // pragma: whitelist secret
      var forum_id = '246775';

      // Include the UserVoice JavaScript SDK (only needed once on a page)
      UserVoice = window.UserVoice || [];
      (function () {
        var uv = document.createElement('script');
        uv.type = 'text/javascript';
        uv.async = true;
        uv.src = 'https://widget.uservoice.com/' + api_key + '.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(uv, s)
      })();

      
      UserVoice.push(['setSSO', 'TP/4mp7s8HQvbadeclHQnkFEtRVQR6X3PezaVKUuUpNB6jqhfMHY1Xz8Hmrp5%2B%2BpgfjUP%2B2vMlofC8jXiZpxPXZ5mM9ZQDSjoVyUeWMaZiFbLjUdIOeZU/GaOw1i/6IjuPn4VXI6mIpydUMFvtEFzq%2BUpB7JJ35mB4W6dumeYSI%3D']);
      

      //
      // UserVoice Javascript SDK developer documentation:
      // https://www.uservoice.com/o/javascript-sdk
      //
      UserVoice.push(['showTab', 'classic_widget', {
        mode: 'full',
        primary_color: '#19496A',
        link_color: '#007dbf',
        default_mode: 'support',
        tab_label: "Support/Feedback",
        tab_color: '#19496A',
        tab_position: 'middle-right',
        tab_inverted: false
      }]);

      // Post new ideas to IBM Data Scientist Workbench forum
      UserVoice.push(['set', 'forum_id', forum_id]);

      
      UserVoice.push(['identify', {
        email: 'traczko@metlife.com',
        name: ' '
      }]);
      
    });

  </script>
  <!-- end UserVoice -->
  

  
  <script defer>
    var appcuesLoader = document.createElement("script");

    appcuesLoader.addEventListener("load", function () {
      function configureAppcues() {
        // Adblockers can block Appcues
        if (Appcues) {
          
          Appcues.identify('traczko');
          
        }
      }

      if (Appcues) {
        configureAppcues();
      } else {
        setTimeout(function () { configureAppcues(); }, 500);
      }
    });

    appcuesLoader.src = 'https://fast.appcues.com/37753.js';
    // Defer is better than async because it doesn't block rendering
    appcuesLoader.defer = true;
    document.getElementsByTagName("script")[0].parentNode.appendChild(appcuesLoader);
  </script>

  

  
  <script src="/static/js/bundle.min.js"></script>
  


  <div class="page-container">
    
    <nav class="navbar">
  <div class="nav-header">

    <div class="navbar-section left">

      <button class="skills-network-home">
        <img class="sn-logo light">
        <img class="sn-logo dark">
        <span class="home-title">Skills Network Labs</span>
      </button>

      <div class="custom-logo flex items-center justify-between">
        <div id="navbar-logo-divider"></div>
        <span id="navbar-logo-wrapper" class="navbar-brand" style="margin-left: 0;">
          <img id="partner-logo" style="height:20px; max-width: 150px; max-height: 20px;">
        </span>
      </div>

    </div>

    <div class="navbar-section right">

      <div class="flex items-center justify-between gap-2">
        <span class="toggle-theme-icon dark h-4 w-4"></span>
        <button type="button" onclick="changeTheme(event)" id="toggle-theme-button"
          class="relative inline-flex flex-shrink-0 h-5 w-10 border-2 border-transparent rounded-full cursor-pointer transition-colors ease-in-out duration-200 focus:outline-none"
          role="switch" aria-checked="false">
          <span class="sr-only">Dark/light mode</span>
          <span aria-hidden="true" id="toggle-theme-button-selector"
            class="translate-x-0 pointer-events-none inline-block h-4 w-4 rounded-full shadow transform ring-0 transition ease-in-out duration-200"></span>
        </button>
      </div>

      <!-- Tai help button -->
      <button class="group w-5 tai-help flex justify-center" id="help" aria-label="Tai Support"><svg viewBox="0 0 24 24"
          class="w-5" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="">
          <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
          <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
          <g id="SVGRepo_iconCarrier">
            <path
              d="M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zM7.92 9.234v.102a.5.5 0 0 0 .5.5h.997a.499.499 0 0 0 .499-.499c0-1.29.998-1.979 2.34-1.979 1.308 0 2.168.689 2.168 1.67 0 .928-.482 1.359-1.686 1.91l-.344.154C11.379 11.54 11 12.21 11 13.381v.119a.5.5 0 0 0 .5.5h.997a.499.499 0 0 0 .499-.499c0-.516.138-.723.55-.912l.345-.155c1.445-.654 2.529-1.514 2.529-3.39v-.103c0-1.978-1.72-3.441-4.164-3.441-2.478 0-4.336 1.428-4.336 3.734zm2.58 7.757c0 .867.659 1.509 1.491 1.509.85 0 1.509-.642 1.509-1.509 0-.867-.659-1.491-1.509-1.491-.832 0-1.491.624-1.491 1.491z"
              fill="currentColor"></path>
          </g>
        </svg>
        <span
          class="tooltip absolute w-auto p-1 min-w-max top-14 rounded-md shadow-md text-xs transition-all duration-100 group-hover:delay-500 scale-0 group-hover:scale-100 origin-top capitalize z-50">Coming
          Soon!</span>
      </button>

      <!-- noticeable widget -->
      <button class="menu-button icon" id="noticeable-widget" title="What's new" aria-label="What's New"></button>

      <div class="menu-dropdown">
        <button class="menu-button icon" id="notifications" title="Notifications" aria-label="Notifications"
          onclick="toggleNotifications(event)"></button>
        <span id="notifications_count"></span>
        <div class="dropdown-toggle" style="right: 0;">
          <ul id="notifications">
            <!-- gets cleared out if notifications are found -->
            <li class="no-notifications">No more notifications to read!</li>
          </ul>
        </div>
      </div>

      <div class="menu-dropdown">
        <button class="menu-button drop">Account<span class="menu-dropdown-arrow"></span></button>
        <div class="dropdown-content" style="right: 0;">
          <a href="/profile">Profile</a>
          <a href="/session_history">Session History</a>
          <a target="_blank" href="https://www.ibm.com/legal">Terms</a>
          <a href="/logout">Logout</a>
        </div>
      </div>

    </div>

  </div>
</nav>

<style>
  nav.navbar {
    position: relative;
    top: 0;
    left: 0;
    width: 100%;
    height: var(--topbar-height);
    margin: 0;
    border: none;
  }

  div.nav-header {
    position: relative;
    width: 100%;
    padding: 10px 25px;
    background-color: var(--header-bg);
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    color: var(--header-text);
    font-size: 14px;
    height: min-content;
  }

  div.navbar-section {
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    align-items: center;
    height: min-content;
    flex-wrap: wrap;
  }

  div.navbar-section button {
    font-weight: normal;
    cursor: pointer;
  }

  div.navbar-section button.menu-button {
    color: var(--menu-button-no-dropdown-text);
    font-weight: normal;
    font-size: 14px;
    line-height: 17px;
    padding: 10px 0px;
    overflow: hidden;
    white-space: nowrap;
    width: max-content;
  }

  div.navbar-section button.menu-button a {
    text-decoration: none;
    color: inherit;
  }

  div.navbar-section button.menu-button.drop {
    color: var(--header-text);
  }

  div.navbar-section button.menu-button.drop>span.menu-dropdown-arrow {
    background-color: var(--header-text);
    width: 6px;
    height: 2.5px;
    mask-image: url('/static/images/svg/arrow-down.svg');
    -webkit-mask-image: url('/static/images/svg/arrow-down.svg');
    vertical-align: middle;
    margin-left: 6px;
    display: inline-block;
  }

  div.navbar-section button.tai-help {
    color: var(--header-icon);
  }

  div.navbar-section button.menu-button.icon {
    background-color: var(--header-icon);
    vertical-align: text-top;
    display: inline-block;
    mask-position: center;
    -webkit-mask-position: center;
    mask-repeat: no-repeat;
    -webkit-mask-repeat: no-repeat;
    mask-size: 100% 100%;
    -webkit-mask-size: 100% 100%;
  }

  div.navbar-section button.menu-button.icon#noticeable-widget {
    width: 19px;
    height: 15px;
    mask-image: url('/static/images/svg/speakerphone.svg');
    -webkit-mask-image: url('/static/images/svg/speakerphone.svg');
  }

  div.navbar-section button.menu-button.icon#notifications {
    width: 15.46px;
    height: 16.5px;
    mask-image: url('/static/images/svg/bell.svg');
    -webkit-mask-image: url('/static/images/svg/bell.svg');
  }

  div.navbar-section.left {
    margin-right: 15px;
    gap: 0px 50px;
  }

  div.navbar-section.left>button.skills-network-home {
    font-weight: 500;
    font-size: 14px;
    line-height: 16.94px;
    pointer-events: none;
    width: max-content;
  }

  button.skills-network-home {
    display: flex;
    align-items: center;
  }

  button.skills-network-home>span.home-title {
    overflow: hidden;
    white-space: nowrap;
    color: var(--header-text);
  }

  button.skills-network-home>img.sn-logo {
    display: inline;
    height: 35px;
    margin-right: 12px;
    width: 35px;
  }

  button.skills-network-home>img.sn-logo.light {
    content: url('/static/images/svg/SN_grayscale_lightmode_tree.svg');
  }

  button.skills-network-home>img.sn-logo.dark {
    content: url('/static/images/svg/SN_grayscale_darkmode_tree.svg');
  }

  body.light button.skills-network-home>img.sn-logo.dark {
    display: none;
  }

  body.light button.skills-network-home>img.sn-logo.light {
    display: inline;
  }

  body button.skills-network-home>img.sn-logo.light {
    display: none;
  }

  div.navbar-section.right {
    gap: 10px 30px;
  }

  div.dropdown-content,
  div.dropdown-toggle {
    display: none;
    position: absolute;
    margin-top: 0px;
    background-color: var(--dropdown-bg);
    min-width: 130px;
    filter: var(--dropdown-filter);
    border-radius: 4px;
    z-index: 1;
  }

  div.dropdown-toggle.show {
    display: block;
    margin-top: 10px;
  }

  div.dropdown-content>a {
    color: var(--dropdown-link-text);
    padding: 8px 20px;
    text-decoration: none;
    display: block;
    font-weight: normal;
    font-size: 12px;
    line-height: 15px;
    transition: 300ms ease-in-out;
    -webkit-transition: 300ms ease-in-out;
    transition-property: all;
    -webkit-transition-property: all;
  }

  div.dropdown-content>a:hover {
    background-color: var(--dropdown-link-bg-hover);
    color: var(--dropdown-link-text-hover);
  }

  div.dropdown-content>a:first-child:hover {
    border-top-left-radius: 4px;
    border-top-right-radius: 4px;
  }

  div.dropdown-content>a:last-child:hover {
    border-bottom-left-radius: 4px;
    border-bottom-right-radius: 4px;
  }

  div.navbar-section div.menu-dropdown {
    position: relative;
  }

  div.navbar-section div.menu-dropdown:hover div.dropdown-content {
    display: block;
  }

  .visible-iframe {
    opacity: 1;
    z-index: 2;
    visibility: visible;
  }

  div.custom-logo {
    display: none;
    margin-left: -38px;
    min-height: 16px;
  }

  div.custom-logo div#navbar-logo-divider {
    width: 1px;
    height: 16px;
    background: #ccc;
    margin-right: 17px;
  }

  div.custom-logo span#navbar-logo-wrapper {
    height: min-content;
    width: min-content;
  }

  /** styling for notifications **/
  ul#notifications {
    list-style-type: none;
    padding: 15px 0;
    margin: 0;
    max-height: 520px;
    width: 300px;
    overflow-y: auto;
    color: var(--notification-text);
    background-color: var(--notification-bg);
    border-radius: inherit;
  }

  ul#notifications li {
    margin: 10px 20px;
  }

  ul#notifications li.notification {
    border-left: 11px solid var(--notification-accent);
    padding-left: 27px;
  }

  ul#notifications li.notification.read {
    border-left: none;
    padding-left: 0;
  }

  ul#notifications li.no-notifications {
    text-align: center;
  }

  ul#notifications li#previous_notifications {
    text-align: center;
    font-weight: 700;
  }

  span#mark_all_read {
    cursor: pointer;
    background: var(--notification-accent);
    border-radius: 4px;
    padding: 5px 10px;
    text-transform: capitalize;
    text-align: center;
    vertical-align: middle;
  }

  span.toggle-theme-icon {
    background-color: #9d9d9d;
    vertical-align: text-top;
    display: inline-block;
    mask-position: center;
    -webkit-mask-position: center;
    mask-repeat: no-repeat;
    -webkit-mask-repeat: no-repeat;
    mask-size: 100% 100%;
    -webkit-mask-size: 100% 100%;
  }

  span.toggle-theme-icon.dark {
    mask-image: url('/static/images/svg/moon.svg');
    -webkit-mask-image: url('/static/images/svg/moon.svg');
  }

  span.toggle-theme-icon.light {
    mask-image: url('/static/images/svg/sun.svg');
    -webkit-mask-image: url('/static/images/svg/sun.svg');
  }

  button#toggle-theme-button {
    background-color: var(--toggle-bg);
    padding: 0;
  }

  button#toggle-theme-button>span#toggle-theme-button-selector {
    background-color: var(--toggle-selector);
  }
</style>


<script src="/static/js/modules/iframe_comms/comms_vars.js"></script>

<script src="/static/js/modules/iframe_comms/ui_requests.js"> </script>

<script>
  $(document).ready(function () {
    if (!localStorage.getItem("currentTheme")) {
      localStorage.setItem("currentTheme", "dark");
    }
    if (localStorage.getItem("currentTheme") == "light") {
      $('body').toggleClass("light");
      $('span#toggle-theme-button-selector').addClass('translate-x-5').removeClass('translate-x-0');
      $('span.toggle-theme-icon').addClass('light').removeClass('dark');
      $('button#toggle-theme-button').attr("aria-checked", "true");
      if (!$('body').hasClass('light')) {
        $('body').addClass('light');
      };
    }
    setFramesOrigin('', 'https://jupyterlab-5-labs-prod-jupyterlab-us-east-0.labs.cognitiveclass.ai/oauth_login?next=%2Fhub%2Fspawn%3Fstorage%3Dcosfs%26next%3D%252Fuser-redirect%252Flab%252Ftree%252F%252Flabs%252Fmodule_2%252Fjupyter-labs-eda-sql-coursera_sqllite.ipynb%253Ft%253D%2526d%253Dgrading.labs.cognitiveclass.ai%2526mode%253Dlearn%2526env_type%253Djupyterlab');
  });
</script>

<script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
<script src="/static/js/modules/notifications_ws.js"></script>

<script>
  var websocket_url = "https://websocket-service.skills.network";
  var websocket_token = "None";
  if (websocket_token) {
    startReceiveNotifications(websocket_token, websocket_url)
  }
</script>

<script>
  // toggle popups
  function toggleNotifications(event) {
    const button = $(event.target);
    const parentContainer = button.parent("div.menu-dropdown");
    parentContainer.children('div.dropdown-toggle').first().toggleClass("show");
  }

  function changeTheme(event) {
    const toggle = $(event.target);
    if (localStorage.getItem("currentTheme") === "dark") {
      // dark -> light
      localStorage.setItem("currentTheme", "light");
      updated_color = "light";
      $('span#toggle-theme-button-selector').addClass('translate-x-5').removeClass('translate-x-0');
      $('span.toggle-theme-icon').addClass('light').removeClass('dark');
      toggle.attr("aria-checked", "true");
    } else {
      // light -> dark
      localStorage.setItem("currentTheme", "dark");
      updated_color = "dark";
      $('span#toggle-theme-button-selector').addClass('translate-x-0').removeClass('translate-x-5');
      $('span.toggle-theme-icon').addClass('dark').removeClass('light');
      toggle.attr("aria-checked", "false");
    };
    $('body').toggleClass("light");

    //update theme for author-ide and theia if either is present
    change_theme(updated_color);
  }
</script>

<script>
  // optionally display custom logo next to labs home button
  var branding_logo = window.sessionStorage.getItem("branding_logo")
  if (branding_logo) {
    $('div.custom-logo span#navbar-logo-wrapper img#partner-logo').attr('src', branding_logo)
    document.querySelector("div.custom-logo").style.display = "flex";
  }
</script>
    
    

    
    

    

    
    

    

    <div class="content-wrapper">
      <div class="flex pt-0.5" id="left-side-nav">
  <nav class="flex grow">

    <ul role="list" class="w-full space-y-0" id="tabs">
      
      
      <li class="rounded-l-sm"> <a href="#tai-chat" class="group flex px-1.5 py-4 text-sm font-semibold">
          <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="w-full">
            <path stroke="currentColor" fill="#ffffff00"
              d="M7 4C4.79086 4 3 5.79073 3 7.9997V13.2642C3 15.4732 4.79086 17.2639 7 17.2639L7 19.8998C7 19.9834 7.09639 20.0301 7.16197 19.9783L10.6 17.2639H17C19.2091 17.2639 21 15.4732 21 13.2642V7.99971C21 5.79073 19.2091 4 17 4H7Z"
              stroke-width="2" stroke-linecap="round" />
            <path fill="currentColor"
              d="M9 11C9 11.5523 8.55228 12 8 12C7.44772 12 7 11.5523 7 11C7 10.4477 7.44772 10 8 10C8.55228 10 9 10.4477 9 11Z" />
            <path fill="currentColor"
              d="M13 11C13 11.5523 12.5523 12 12 12C11.4477 12 11 11.5523 11 11C11 10.4477 11.4477 10 12 10C12.5523 10 13 10.4477 13 11Z" />
            <path fill="currentColor"
              d="M17 11C17 11.5523 16.5523 12 16 12C15.4477 12 15 11.5523 15 11C15 10.4477 15.4477 10 16 10C16.5523 10 17 10.4477 17 11Z" />
          </svg>
          
          <span
            class="tooltip absolute w-auto p-2 min-w-max left-14 rounded-md shadow-md text-xs font-bold transition-all duration-100 group-hover:delay-700 scale-0 group-hover:scale-100 origin-left capitalize z-50">Tai
            Chat</span>
        </a>
      </li>
      
    </ul>
  </nav>
  <style>
    #tabs svg {
      color: var(--left-side-nav-icon)
    }

    ul#tabs li {
      transition: all 0.15s ease-in-out;
    }

    ul#tabs li:hover svg {
      color: var(--left-side-nav-icon-hover);
    }

    ul#tabs li.active {
      background-color: var(--left-side-nav-icon-bg);
      border-left: 3px solid var(--left-side-nav-icon);

      /*
    border-top: 1px solid var(--left-side-nav-icon);
    border-bottom: 1px solid var(--left-side-nav-icon);
    */
    }
  </style>
  <script>
    let tabsContainer = document.querySelector("ul#tabs");

    let tabContents = document.querySelector("#left-side-container");

    let lastTabPercenage = 40;
    

    let tabTogglers = tabsContainer.querySelectorAll("ul#tabs a");

    tabTogglers.forEach((toggler) => {
      toggler.addEventListener("click", function (e) {
        e.preventDefault();
        // There are 4 cases to handle when a tab is clicked
        // 1. if the clicked tab is not active and the left-side-component is hidden, make it active and show the left-side-component
        // 2. if the clicked tab is not active and the left-side-component is not hidden, make it active
        // 3. if the clicked tab is active and the left-side-component is not hidden, make it inactive and hide the left-side-component
        // 4. if the clicked tab is active and the left-side-component is hidden, show the left-side-component

        // get the href of the tab we clicked on
        let tabHref = toggler.getAttribute("href");

        tabContents = document.querySelector("#left-side-container");
        let rightSideContainer = document.querySelector("#right-side-container");

        for (let i = 0; i < tabContents.children.length; i++) {

          let tabContent = tabContents.children[i];
          let tabContentId = tabContent.getAttribute("id");
          // check if the left-side-component is hidden or not by checking it's width
          let isHidden = tabContents.style.width === "0%";
          // check if the clicked tab is active or not by checking if it doesn't have the hidden class
          let isActive = !tabContent.classList.contains("hidden");
          if ("#" + tabContentId === tabHref) { // do this for the clicked tab (tabHref)
            if (isActive && isHidden) {
              // if the clicked tab is active and the left-side-component is hidden, show the left-side-component
              tabContents.style.width = lastTabPercenage + "%";
              rightSideContainer.style.width = (100 - lastTabPercenage) + "%";
              showClickedTab(toggler, tabContent, tabTogglers);
            } else if (isActive && !isHidden) {
              // if the clicked tab is active and the left-side-component is not hidden, make it inactive and hide the left-side-component
              // save the width of the left-side-component before hiding it
              lastTabPercenage = (100 * parseFloat($('#left-side-container').css('width')) / parseFloat($('#left-side-container').parent().css('width')));
              console.log(tabContents)
              console.log(lastTabPercenage)
              tabContents.style.width = "0%";
              rightSideContainer.style.width = "100%";
              tabContent.classList.add("hidden");
              // make the clicked tab inactive by making it's background back to normal
              toggler.parentElement.classList.remove("active")
              // hide the gutter between the left-side-component and the right-side-component
              document.querySelector(".gutter").classList.add("hidden");
            } else if (!isActive && isHidden) {
              // if the clicked tab is not active and the left-side-component is hidden, make it active and show the left-side-component
              tabContents.style.width = lastTabPercenage + "%";
              rightSideContainer.style.width = (100 - lastTabPercenage) + "%";
              showClickedTab(toggler, tabContent, tabTogglers);

            } else if (!isActive && !isHidden) {
              // if the clicked tab is not active and the left-side-component is not hidden, make it active
              showClickedTab(toggler, tabContent, tabTogglers);
            }
          } else { // do this for the other tabs
            // if the clicked tab is not the one we are checking, make it inactive
            tabContent.classList.add("hidden");
          }
        }
      });
    });
    function showClickedTab(toggler, tabContent, tabTogglers) {
      // show the clicked tab
      tabContent.classList.remove("hidden");
      // make the other tabs inactive by making it's background back to normal
      for (let i = 0; i < tabTogglers.length; i++) {
        tabTogglers[i].parentElement.classList.remove("active")
      }
      // make the clicked tab active
      toggler.parentElement.classList.add("active")

      // show the gutter between the left-side-component and the right-side-component
      document.querySelector(".gutter").classList.remove("hidden");
    }

  </script>
</div>
      <div id="main-container">
        <div id="left-side-container">
          
          <section id="tai-chat" class="overflow-hidden h-full">
    
    <script src="https://cdn.jsdelivr.net/npm/marked/lib/marked.umd.js"></script>
    <link rel="stylesheet"
        href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/atom-one-dark-reasonable.min.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
    <script>
        function formatGeneratedCodeBlock(clipboard) {
            // 1. Get all the code blocks
            document.querySelectorAll('pre code').forEach(function (codeBlock) {
                var pre = codeBlock.parentElement;
                // check if code block has already been processed
                if (pre.classList.contains('scrollbar')) {
                    return;
                }

                pre.classList.add('scrollbar');

                // 2. Extract the text we want to copy
                var code = codeBlock.innerText;
                //marked.use(markedHighlight({
                //    langPrefix: 'hljs language-',
                //    highlight(code, lang) {
                //        const language = hljs.getLanguage(lang) ? lang : 'plaintext';
                //        return hljs.highlight(code, { language: language }).value;
                //    }
                //}));
                // TODO: Temporary fix for the above commented code not working
                hljs.highlightElement(codeBlock);
                // remove the hljs class from the code block (because it's interfering with our modified scrollbar styling)
                codeBlock.classList.remove('hljs');

                // 3. Create the HTML element that we'll add to the DOM
                var codeWrapper = document.createElement('div');
                codeWrapper.className = 'code-wrapper';
                var codeActionsWrapper = document.createElement('div');
                codeActionsWrapper.className = 'code-actions-wrapper';

                // make pre a child of the new div
                $(pre).wrap(codeWrapper);

                // 4. Create the copy button
                var copyButton = document.createElement('button');
                copyButton.className = 'copy-code w-4 rounded-full text-gray-600 hover:text-gray-700 transition-colors duration-200 group flex justify-center relative';
                copyButton.type = 'button';
                // add svg
                copyButton.innerHTML = `<svg class="w-4" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M16 12.9V17.1C16 20.6 14.6 22 11.1 22H6.9C3.4 22 2 20.6 2 17.1V12.9C2 9.4 3.4 8 6.9 8H11.1C14.6 8 16 9.4 16 12.9Z" stroke="#ffffff" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path> <path d="M22 6.9V11.1C22 14.6 20.6 16 17.1 16H16V12.9C16 9.4 14.6 8 11.1 8H8V6.9C8 3.4 9.4 2 12.9 2H17.1C20.6 2 22 3.4 22 6.9Z" stroke="#ffffff" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path> </g></svg>
                <span class="tooltip absolute w-auto p-1 min-w-max bottom-7 rounded-md shadow-md text-xs transition-all duration-100 group-hover:delay-1000 scale-0 group-hover:scale-100 origin-bottom capitalize z-50">Copy code</span>`;

                // 5. Create the event listener and using a closure save the
                // content of the text we want to save and add it to the clipboard
                copyButton.addEventListener('click', function () {
                    clipboard.writeText(code).then(function () {
                        copyButton.innerHTML = `<svg class="w-4" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="#2edb59"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M22 11.1V6.9C22 3.4 20.6 2 17.1 2H12.9C9.4 2 8 3.4 8 6.9V8H11.1C14.6 8 16 9.4 16 12.9V16H17.1C20.6 16 22 14.6 22 11.1Z" stroke="def add_two_numbers(a, b): return a + b" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path> <path d="M16 17.1V12.9C16 9.4 14.6 8 11.1 8H6.9C3.4 8 2 9.4 2 12.9V17.1C2 20.6 3.4 22 6.9 22H11.1C14.6 22 16 20.6 16 17.1Z" stroke="def add_two_numbers(a, b): return a + b" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path> <path d="M6.08008 15L8.03008 16.95L11.9201 13.05" stroke="def add_two_numbers(a, b): return a + b" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path> </g></svg>
                <span class="tooltip absolute w-auto p-1 min-w-max bottom-7 rounded-md shadow-md text-xs transition-all duration-100 origin-bottom capitalize z-50">Copy code</span>`

                        setTimeout(function () {
                            copyButton.innerHTML = `<svg class="w-4" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M16 12.9V17.1C16 20.6 14.6 22 11.1 22H6.9C3.4 22 2 20.6 2 17.1V12.9C2 9.4 3.4 8 6.9 8H11.1C14.6 8 16 9.4 16 12.9Z" stroke="#ffffff" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path> <path d="M22 6.9V11.1C22 14.6 20.6 16 17.1 16H16V12.9C16 9.4 14.6 8 11.1 8H8V6.9C8 3.4 9.4 2 12.9 2H17.1C20.6 2 22 3.4 22 6.9Z" stroke="#ffffff" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path> </g></svg>
                            <span class="tooltip absolute w-auto p-1 min-w-max bottom-7 rounded-md shadow-md text-xs transition-all duration-100 group-hover:delay-1000 scale-0 group-hover:scale-100 origin-bottom capitalize z-50">Copy code</span>`;
                        }, 2000);
                    }, function (error) {
                        copyButton.innerText = 'Error';
                    });
                });
                

                codeActionsWrapper.appendChild(copyButton);
                // 7. Add the buttons to beggining of the code block
                pre.parentElement.insertBefore(codeActionsWrapper, pre);
            });
        }

        $(document).ready(function () {
            var el = document.getElementById('messages')

            // add the messages to the chatbox
            
            //check if message is from user or from TAI
            
            $('#messages').append(`
            <div class="chat-message flex items-end gap-2 mr-10">
                <div class="flex flex-col space-y-2 text-sm max-w-md order-2 items-start w-[calc(100%-40px)]">
                    <div class="px-4 py-2 rounded-lg rounded-bl-none bg-gray-300 text-gray-600 max-w-full">
                        ${marked.parse(`Hello! My name is Tai and I am an AI-Powered Teaching Assistant designed to help you with your coursework. How can I help you?`)}
                    </div>
                </div>
                <img src="/static/images/tai-128x128.png" alt="Tai profile"
                    class="w-8 h-8 rounded-full order-1">
            </div>
            `)
            
            

            formatGeneratedCodeBlock(navigator.clipboard);
            // scroll to the bottom of the messages
            el.scrollTop = el.scrollHeight
        });

        //JavaScript code to handle button click and make the fetch request
        $(() => {
            function sendMessageToTai(userMessage) {
                // remove all the children of the messages that contain a class of "error-message"
                $('#messages').children('.error-message').remove();

                // disable the button
                $("#sendChatBtn").prop("disabled", true);

                // add user's message to the messages
                $('#messages').append(`
                <div class="chat-message flex items-end justify-end gap-2 ml-10">
                    <img src="/static/images/profile-picture.png" alt="My profile"
                        class="w-8 h-8 rounded-full order-2">
                    <div class="flex flex-col space-y-2 text-sm max-w-md order-1 items-end w-[calc(100%-40px)]">
                        <div class="px-4 py-2 rounded-lg inline-block rounded-br-none bg-indigo-600 text-white max-w-full">
                            ${marked.parse(userMessage)}
                        </div>
                    </div>
                </div>
                `);

                // clear the textarea
                let textarea = document.getElementById("chatInput");
                textarea.value = "";
                // clear the replicated value (which is used to expand the textarea)
                textarea.parentElement.dataset.replicatedValue = "";


                // add a loading message
                $('#messages').append(`
                <div class="chat-message">
                    <div class="flex items-end">
                        <div class="flex flex-col space-y-2 text-sm max-w-xs mx-2 order-2 items-start">
                            <div><span class="px-4 py-2 rounded-lg inline-block  rounded-bl-none bg-gray-300 text-gray-600">
                                <div class="flex justify-center">
                                    <div class="animate-spin rounded-full h-3 w-3 border-t-2 border-b-2 border-gray-900"></div>
                                </div>
                            </span>
                            </div>
                        </div>
                        <img src="/static/images/tai-128x128.png" alt="My profile"
                            class="w-8 h-8 rounded-full order-1">
                    </div>
                </div>
                `);
                formatGeneratedCodeBlock(navigator.clipboard);

                // scroll to the bottom of the messages
                var el = document.getElementById('messages')
                el.scrollTop = el.scrollHeight


                let base64EncodedMessage;
                try {
                    base64EncodedMessage = btoa(unescape(encodeURIComponent(userMessage)));
                } catch (error) {
                    console.error('Error encoding string to base64:', error);
                }

                // Make a ajax request
                $.ajax({
                    url: "/v2/tai/message",
                    type: "POST",
                    data: JSON.stringify({
                        // "messageToTai": userMessage,
                        "messageToTaiBase64": base64EncodedMessage,
                        "chatID": "tai:traczko:ulid-6e4030f946b343c390bd016066159e1753a42892"
                    }),
                    timeout: 40000,
            contentType: "application/json;charset=UTF-8",
                success: function (response) {
                    // remove the loading message
                    $('.chat-message').last().remove();
                    // update the messages using jquery
                    $('#messages').append(`
                        <div class="chat-message flex items-end gap-2 mr-10" >
                            <div class="flex flex-col space-y-2 text-sm max-w-md order-2 items-start w-[calc(100%-40px)]">
                                <div class="px-4 py-2 rounded-lg rounded-bl-none bg-gray-300 text-gray-600 max-w-full">
                                    ${marked.parse(response.taiResponse)}
                                </div>
                            </div>
                            <img src="/static/images/tai-128x128.png"
                                        alt="My profile" class="w-8 h-8 rounded-full order-1">
                        </div>
                        `);
                    formatGeneratedCodeBlock(navigator.clipboard);

                    // scroll to the bottom of the messages
                    el.scrollTop = el.scrollHeight

                    // enable back the button
                    $("#sendChatBtn").prop("disabled", false);
                },
            error: function (xhr, status, errorThrown) {
                // remove the loading message
                $('.chat-message').last().remove();
                let errorMessage = status == "timeout" ? "Oops! Looks like the request took longer than expected to process. Don't worry, it happens sometimes. Would you mind trying again?" : "Oops! Looks like something went wrong. Don't worry, it happens sometimes. Would you mind trying again?";

                // if response code  is 422
                console.log("xhr:", xhr)
                console.log("status:", status)
                console.log("errorThrown:", errorThrown)
                if (xhr.status == 422) {
                    errorMessage = "Text was found that violates our content policy";
                }

                // show an error message and a retry button
                $('#messages').append(`
                            <div class="error-message flex items-end gap-2 mr-10" >
                                <div class="flex flex-col space-y-2 text-sm max-w-md order-2 items-start w-[calc(100%-40px)]">
                                    <div class="px-4 py-2 rounded-lg rounded-bl-none bg-red-600 text-white max-w-full">
                                        ${marked.parse(errorMessage)}
                                    </div>
                                </div >
                                <img src="/static/images/tai-128x128.png" alt="My profile" class="w-8 h-8 rounded-full order-1">
                            </div >
                            `);
                // add a retry button unless the error is 422
                if (xhr.status != 422) {
                    $('#messages').append(`
                            <div id="regenTaiResponse"
                            class="error-message flex regen-response" >
                                <div class="flex space-y-2 text-sm max-w-md mx-auto">
                                        <button class="chatBtn bg-indigo-600 hover:bg-indigo-500 text-white px-4 py-2.5 rounded-lg flex items-center space-x-2 transition duration-300 ease-in-out transform">
                                        <svg class="w-4 h-4"
                                         viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="" transform="matrix(-1, 0, 0, 1, 0, 0)"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path fill="none" stroke="#fff" stroke-width="2" d="M20,8 C18.5343681,5.03213345 15.4860999,3 11.9637942,3 C7.01333514,3 3,7.02954545 3,12 M4,16 C5.4656319,18.9678666 8.51390007,21 12.0362058,21 C16.9866649,21 21,16.9704545 21,12 M9,16 L3,16 L3,22 M21,2 L21,8 L15,8"></path> </g></svg>
                                            <span>Regenerate Response</span>
                                        </button>
                                </div>
                            </div >
                    `);
                    $("#regenTaiResponse").click(() => {
                        // remove user's message last message(to avoid duplicates)
                        $('.chat-message').last().remove();

                        // rerun sendMessageToTai with the same userMessage                        
                        sendMessageToTai(userMessage);
                    });
                }
                formatGeneratedCodeBlock(navigator.clipboard);

                el.scrollTop = el.scrollHeight

                // enable back the button
                $("#sendChatBtn").prop("disabled", false);
            }
        });
            }

        // handle the form submit event
        $("#chatBox").submit(function (e) {
            // Prevent the default form submit action
            e.preventDefault();
            // Get the message from the textarea
            var userMessage = document.getElementById("chatInput").value;

            sendMessageToTai(userMessage);
        });



            // TODO: attempt to submit the form when enter is pressed
            /*document.getElementsByTagName('textarea')[0].addEventListener("keydown", function (event) {
                // Has the enter key been pressed?
                if ((window.event ? event.keyCode : e.which) == 13) {
                    event.preventDefault();
                    document.forms[0].submit();
                }
            }); */
        });
    </script>
    <div class="flex flex-col h-full w-full">
        <div id="messages"
            class="flex w-full flex-1 flex-col overflow-x-hidden overflow-y-auto space-y-4 p-3 scrollbar-thumb-blue scrollbar-thumb-rounded scrollbar-track-blue-lighter scrollbar-w-2 scrolling-touch">
        </div>
        <div class="m-2">
            <form class="w-full bg-gray-300 rounded-lg p-4 grid grid-rows-12" id="chatBox">
                <div class="grow-wrap">
                    <textarea aria-multiline="true" rows="3" placeholder="Ask Tai..." id="chatInput" required
                        role="textbox" name="chatInput"
                        class="resize-none bg-transparent focus:outline-none overflow-x-hidden overflow-y-auto scrollbar scrolling-touch"
                        onInput="this.parentNode.dataset.replicatedValue=this.value"></textarea>
                </div>

                <div class="" id="chat-options">
                    <div class="flex items-end">
                        <!-- Options icons at the bottom left -->
                        <div class="cursor-pointer group flex justify-center" id="reset-chat" disabled>
                            <svg height="100%" class="w-6 h-6 fill-current"
                                style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"
                                version="1.1" viewBox="0 0 32 32" width="100%" xml:space="preserve"
                                xmlns="http://www.w3.org/2000/svg" xmlns:serif="http://www.serif.com/"
                                xmlns:xlink="http://www.w3.org/1999/xlink">
                                <path
                                    d="M20.852,6.744c3.074,1.756 5.15,5.126 5.15,8.986c0,5.664 -4.474,10.275 -10,10.275c-5.526,0 -10,-4.611 -10,-10.275c0,-4.566 2.906,-8.446 6.93,-9.781c0.524,-0.174 0.808,-0.74 0.635,-1.264c-0.174,-0.524 -0.74,-0.808 -1.264,-0.634c-4.81,1.595 -8.301,6.221 -8.301,11.679c0,6.782 5.384,12.275 12,12.275c6.616,0 12,-5.493 12,-12.275c0,-4.431 -2.3,-8.314 -5.74,-10.472l1.211,-0.324c0.533,-0.143 0.85,-0.692 0.707,-1.225c-0.143,-0.533 -0.691,-0.85 -1.224,-0.707l-3.864,1.035c-0.534,0.143 -0.85,0.692 -0.707,1.225l1.035,3.864c0.143,0.533 0.692,0.85 1.225,0.707c0.533,-0.143 0.85,-0.692 0.707,-1.225l-0.5,-1.864Z" />
                            </svg>
                            <span
                                class="tooltip absolute w-auto p-1 min-w-max bottom-14 rounded-md shadow-md text-xs transition-all duration-100 group-hover:delay-500 scale-0 group-hover:scale-100 origin-bottom capitalize z-50">Coming
                                Soon</span>
                        </div>
                        <!-- Send icon at the bottom right -->
                        
                        <!-- Send button at the bottom right -->
                        <button type="submit"
                            class="chatBtn bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-1.5 px-3 rounded-full ml-auto transition duration-300 ease-in-out transform"
                            id="sendChatBtn"> Send </button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <style>
        section#tai-chat #chatBox {
            background-color: var(--tai-textarea-bg);
        }

        /* CSS for the click animation */
        @keyframes clickEffect {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(0.975);
            }

            100% {
                transform: scale(1);
            }

        }

        #chat-options svg {
            color: var(--tai-textarea-icon);

        }

        /* code inside #messages */
        #messages .code-wrapper {
            background-color: #282c34;
            border-radius: 0.4rem;
            position: relative;
            margin-top: 0.5rem;
            margin-bottom: 1rem;
        }

        /* pre inside #messages (sub sub sibling) */
        #messages pre {
            overflow-x: scroll;
            padding: 1rem;


        }

        /* code icon buttons parent */
        #messages .code-actions-wrapper {
            position: absolute;
            display: flex;
            margin-left: auto;
            /* gap between the buttons */
            gap: 0.5rem;
            top: 0;
            right: 0;
            padding-top: 0.5rem;
            padding-right: 0.5rem;
            cursor: pointer;
            border-radius: 0.4rem;
            /* blur background */
            backdrop-filter: blur(1px);
            -webkit-backdrop-filter: blur(1px);
            -moz-backdrop-filter: blur(1px);
            -o-backdrop-filter: blur(1px);
            -ms-backdrop-filter: blur(1px);
        }


        #messages code {
            /* for both inline and block code */
            color: #abb2bf;
            background-color: #282c34;
            /* only for inline code */
            padding: 0.2rem 0.4rem;
            margin: 0 0.2rem;
            border-radius: 0.2rem;
        }

        #messages pre code {
            /* only for block code */
            padding: 0;
            margin: 0;
            border-radius: 0;
        }

        /* all children of .tai-response 
        .tai-response * {
            width: inherit;
            box-sizing: border-box;
        }
        */

        .grow-wrap {
            /* easy way to plop the elements on top of each other and have them both sized based on the tallest one's height */
            display: grid;
        }

        .grow-wrap::after {
            /* Note the weird space! Needed to preventy jumpy behavior */
            content: attr(data-replicated-value) " ";

            /* This is how textarea text behaves */
            white-space: pre-wrap;

            /* Hidden from view, clicks, and screen readers */
            visibility: hidden;
        }

        .grow-wrap>textarea,
        .grow-wrap::after {
            /* Place on top of each other */
            grid-area: 1 / 1 / 2 / 2;
            max-height: 45vh;
        }

        /* custom scrollbar */
        .scrollbar::-webkit-scrollbar {
            width: 0.25rem;
            height: 0.25rem;

        }

        .scrollbar::-webkit-scrollbar-thumb {
            background-color: rgba(156, 163, 175, 1);
            border-radius: 0.25rem;

        }

        .scrollbar::-webkit-scrollbar-track {
            margin: 0.2rem;
        }

        */
    </style>
    
    <style>

    </style>
    
    <style>
        section#tai-chat {
            background-color: var(--tai-chat-bg);
            color: var(--tai-textarea-text);
        }

        .chatBtn:not([disabled]) {
            /* when it's not disabled */
            cursor: pointer;
        }

        .chatBtn:not([disabled]):focus {
            outline: none;
        }

        .chatBtn:not([disabled]):hover {
            transform: scale(1.02);
        }


        /* when it's not disabled and active */
        .chatBtn:not([disabled]):active {
            animation-name: clickEffect;
            animation-duration: 300ms;
        }

        .chatBtn:disabled {
            background-color: #CCCCCC;
            color: #FFFFFF;
        }
    </style>
</section>
        </div>
        <div id="right-side-container"></div>
      </div>
    </div>

    <script>
      localStorage.setItem("grade_token", "")
      var token = localStorage.getItem("grade_token")
      var config = {
        settings: {
          showPopoutIcon: false,
          showMaximiseIcon: false,
          showCloseIcon: false
        },
        content: [{
          type: 'row',
          content: [{
            type: 'component',
            componentName: 'Instructions',
            isClosable: false,
            width: 40,
          }, {
            type: 'component',
            componentName: 'Lab',
            isClosable: false,
            width: 60,
          }]
        }]
      };

      // fetch markdown instructions
      var mode = "";
      var instruction_token = "";
      var lab_environment = "";
      var atlas_token = "";

      if (instruction_token) {
        if (mode == "learn" && lab_environment == "draft") {
          const url = '/preview?token=';
          const html = `<iframe src="${url}" name=author_ide_iframe_name allow="clipboard-read; clipboard-write" style="width: 100%; height: 100%; border: none;"></iframe>`;
          $('#md-instructions').html(html);
        } else if (mode === "author") {
          const url = '/edit?token=';
          const html = `<iframe src="${url}" name=author_ide_iframe_name allow="clipboard-read; clipboard-write" style="width: 100%; height: 100%; border: none;"></iframe>`;
          $('#md-instructions').html(html);
        } else {
          const url = '/render?token=';
          const html = `<iframe src="${url}" name=author_ide_iframe_name allow="clipboard-read; clipboard-write" style="width: 100%; height: 100%; border: none;"></iframe>`;
          $('#md-instructions').html(html);
        }
      }

      // fetch theia iframe
      $('#right-side-container').html('<iframe name="tool_iframe_name" id="tool_iframe" src="https://jupyterlab-5-labs-prod-jupyterlab-us-east-0.labs.cognitiveclass.ai/oauth_login?next=%2Fhub%2Fspawn%3Fstorage%3Dcosfs%26next%3D%252Fuser-redirect%252Flab%252Ftree%252F%252Flabs%252Fmodule_2%252Fjupyter-labs-eda-sql-coursera_sqllite.ipynb%253Ft%253D%2526d%253Dgrading.labs.cognitiveclass.ai%2526mode%253Dlearn%2526env_type%253Djupyterlab" allow="microphone; camera" style="width: 100%; height: 100%; border: none;"></iframe>');

      // make div resizable
      window.Split(['#left-side-container', '#right-side-container'], {
        //sizes: [40, 60], // initial sizes is being set in the next code block (doesn't work if set here because minSize is not set to 0)
        gutterSize: 5,
        // breaks the functionality of the left side nav if user can manually resize to 0
        // minSize: 0,
        // snapOffset: 100,
      });
       // if no instructions, make the width of the left side container 0
      $('#left-side-container').css('width', '0%');
      $('#right-side-container').css('width', '100%');
      

      // make the first <section> child of the left side container visible and the rest of the <section> elements hidden using tailwind css
      $('#left-side-container').children('section').each(function (index) {
        if (index == 0) {
           // if no instructions, hide the left side container
          $(this).addClass('hidden');
          
        } else {
          $(this).addClass('hidden');
        }
      });


      function sendLTIresult() {
        if (token.length > 0) {
          var extractedToken = token.slice(11, -2)
          try {
            var grading_domain = ""
            var grading_url = "https://" + grading_domain + "/lti/results"
            var xhr = new XMLHttpRequest();
            xhr.open("PUT", grading_url, true);
            xhr.setRequestHeader('Authorization', 'Bearer ' + extractedToken);
            xhr.setRequestHeader('Content-Type', 'application/json');
            xhr.onload = function () {
              var response = JSON.parse(xhr.responseText);
              if (xhr.readyState == 4 && xhr.status == "200") {
                document.getElementById('ltiresult').innerHTML = "Completion Registered"
                document.getElementById('ltiresult').disabled = "true"
              } else {
                console.error('an error occured');
              }
            }
            xhr.send("{}");

          }
          catch (err) {
          }

        }
      }

    </script>

    <script src="/static/js/modules/iframe_comms/iframe_comms.js"> </script>

    <script>
      $(document).ready(function () {
        setFrames();
        listenToTheiaLoad();
        listenToAuthorIDELoad();

        // add comms event listener when everything is loaded
        $(window).on('load', function () {
          commsBetweenIframes();
        });

      });
    </script>
    
    

    

  </div>
  
</body>

</html>